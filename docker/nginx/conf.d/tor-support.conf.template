# Tor support configuration
# This file is generated by scripts/setup-tor.sh
# It adds Tor-specific headers and configurations

# Map to add Onion-Location header only for clearnet requests
# Prevents redundant headers for .onion visitors
map $http_host $onion_alternative {
    default "";
    "~^(?!.*\\.onion$)" "http://{{TOR_HIDDEN_SERVICE}}$request_uri";
}

# This will be included in the server block via a separate mechanism
# For now, we'll modify default.conf to include this when it exists
